<% provide :title, t(".title") %>

<div class="row">
  <div class="col-md-12">
    <h1><%= t(".title") %></h1>

    <%= form_with url: users_path, method: :get, local: true, class: "mb-3" do |f| %>
      <div class="input-group">
        <%= f.text_field :search, value: params[:search], placeholder: t(".search_placeholder"), class: "form-control" %>
        <%= f.submit t(".search"), class: "btn btn-primary" %>
      </div>
    <% end %>

    <div class="table-responsive">
      <table class="table table-striped">
        <thead class="thead-dark">
          <tr>
            <th><%= t(".name") %></th>
            <th><%= t(".email") %></th>
            <th><%= t(".activated") %></th>
            <th colspan="3" class="text-center"><%= t(".actions") %></th>
          </tr>
        </thead>
        <tbody>
          <% @users.each do |user| %>
            <tr>
              <td><%= user.name %></td>
              <td><%= user.email %></td>
              <td>
                <%= user.activated? ? t(".activated_true") : t(".activated_false") %>
                <% unless user.activated? %>
                  <% if user.activation_token.present? %>
                    <%= link_to t(".activate"), edit_account_activation_path(user.activation_token, email: user.email), class: "btn btn-primary btn-sm ms-2" %>
                  <% else %>
                    <span class="text-muted"><%= t(".no_activation_token") %></span>
                  <% end %>
                <% end %>
              </td>
              <td><%= link_to t(".show"), user, class: "btn btn-info btn-sm" %></td>
              <td><%= link_to t(".edit"), edit_user_path(user), class: "btn btn-warning btn-sm" %></td>
              <td>
                <%= link_to t(".delete"), user,
                            method: :delete,
                            data: { confirm: t(".confirm_delete") },
                            class: "btn btn-danger btn-sm" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>

    <div class="mt-3">
      <% if @page > 1 %>
        <%= link_to t(".previous"), users_path(page: @page - 1, search: params[:search]), class: "btn btn-secondary" %>
      <% end %>
      <span><%= t(".page", current: @page, total: @total_pages) %></span>
      <% if @page < @total_pages %>
        <%= link_to t(".next"), users_path(page: @page + 1, search: params[:search]), class: "btn btn-secondary" %>
      <% end %>
    </div>

    <div class="mt-3">
      <%= link_to t(".new_user"), new_user_path, class: "btn btn-success" %>
    </div>
  </div>
</div>
